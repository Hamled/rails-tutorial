# Ensure the database is migrated before testing
database:
  post:
    - bundle exec rake db:migrate

# Continuous deployment to Heroku
deployment:
    chapter-3:
      branch: chapter-3
      commands:
        - git push git@heroku.com:safe-garden-9960.git $CIRCLE_SHA1:refs/heads/master
        - heroku run rake db:migrate --app safe-garden-9960
    chapter-4:
      branch: chapter-4
      commands:
        - git push git@heroku.com:warm-woodland-6206.git $CIRCLE_SHA1:refs/heads/master
        - heroku run rake db:migrate --app warm-woodland-6206
    chapter-5:
      branch: chapter-5
      commands:
        - git push git@heroku.com:ancient-cliffs-9324.git $CIRCLE_SHA1:refs/heads/master
        - heroku run rake db:migrate --app ancient-cliffs-9324
    chapter-6:
      branch: chapter-6
      commands:
        - git push git@heroku.com:vast-refuge-3271.git $CIRCLE_SHA1:refs/heads/master
        - heroku run rake db:migrate --app vast-refuge-3271
    chapter-7:
      branch: chapter-7
      commands:
        - git push git@heroku.com:safe-oasis-4625.git $CIRCLE_SHA1:refs/heads/master
        - heroku run rake db:migrate --app safe-oasis-4625
